---
up: [[ООП]]
---
# Классы
---
### Определение класса
**Класс** – это план, который включает все ваши данные. Класс содержит поля (переменные) и методы для описания поведения объекта. Давайте посмотрим на синтаксис класса.
```java
class Abc {
	member variables // class body
	methods
}
```

### Какой класс является базовым для всех классов?
```java
java.lang.Object
```

### Какие виды классов есть в java?
1. **Вложенные классы** – нестатические классы внутри внешнего класса.
2. **Вложенные статические классы** – статические классы внутри внешнего класса.
3. **Локальные классы Java** – классы внутри методов.
4. **Анонимные Java классы** – классы, которые создаются на ходу. Анонимные классы доступно
5. **Final, abstract, enum** - классы

### Область видимости всех классов
Единственными модификаторами доступа, разрешенными для классов верхнего уровня, являются:
**public** , что делает его доступным из любого места
**default/none**, делает его закрытым для пакетов, т. е. видимым только для классов в одном пакете
Вы можете использовать другие модификаторы доступа, если класс является внутренним классом ( public, protected, default, private)

### Расскажите про вложенные классы. В каких случаях они применяются?
Класс называется вложенным (Nested class), если он определен внутри другого класса. Вложенный класс должен создаваться только для того, чтобы обслуживать обрамляющий его класс. Если вложенный класс оказывается полезен в каком-либо ином контексте, он должен стать классом верхнего уровня. Вложенные классы имеют доступ ко всем (в том числе приватным) полям и методам внешнего класса, но не наоборот. Из-за этого разрешения использование вложенных классов приводит к некоторому нарушению инкапсуляции.

Существуют четыре категории вложенных классов:
* Static nested class (Статический вложенный класс);
* Member inner class (Простой внутренний класс);
* Local inner class (Локальный класс);
* Anonymous inner class (Анонимный класс).
Такие категории классов, за исключением первого, также называют внутренними (Inner class). Внутренние классы ассоциируются не с внешним классом, а с экземпляром внешнего.

Каждая из категорий имеет рекомендации по своему применению. Если вложенный класс должен быть виден за пределами одного метода или он слишком длинный для того, чтобы его можно было удобно разместить в границах одного метода и если каждому экземпляру такого класса необходима ссылка на включающий его экземпляр, то используется нестатический внутренний класс. В случае, если ссылка на обрамляющий класс не требуется - лучше сделать такой класс статическим. Если класс необходим только внутри какого-то метода и требуется создавать экземпляры этого класса только в этом методе, то используется локальный класс. А, если к тому же применение класса сводится к использованию лишь в одном месте и уже существует тип, характеризующий этот класс, то рекомендуется делать его анонимным классом.

### Что такое «анонимные классы»? Где они применяются?
Это вложенный локальный класс без имени, который разрешено декларировать в любом месте обрамляющего класса, разрешающем размещение выражений. 
Создание экземпляра анонимного класса происходит одновременно с его объявлением. В зависимости от местоположения анонимный класс ведет себя как статический либо как нестатический вложенный класс - в нестатическом контексте появляется окружающий его экземпляр.

**Анонимные классы имеют несколько ограничений:**
Их использование разрешено только в одном месте программы - месте его создания;
Применение возможно только в том случае, если после порождения экземпляра нет необходимости на него ссылаться;
Реализует лишь методы своего интерфейса или суперкласса, т.е. не может объявлять каких-либо новых методов, так как для доступа к ним нет поименованного типа.

**Анонимные классы обычно применяются для:**
*создания объекта функции (function object)*, например реализация интерфейса Comparator;
*создания объекта процесса* (process object), такого как экземпляры классов Thread, Runnable и подобных;
в статическом методе генерации;
инициализации открытого статического поля final, которое соответствует сложному перечислению типов, когда для каждого экземпляра в перечислении требуется отдельный подкласс.

Анонимные классы всегда являются конечными классами. 
Каждое объявление анонимного класса уникально. Видны только внутри того метода, в котором определены. В документации Oracle приведена хорошая рекомендация: «Применяйте анонимные классы, если вам нужен локальный класс для одноразового использования».

### Что такое «локальный класс»? Каковы его особенности?
Данные классы **объявляются внутри других методов**. Они **обладают всеми свойствами нестатического вложенного класса**, только **создавать их экземпляры можно только в методе**.
**Особенности:**
* Локальные классы способны работать только с final переменными метода. 
* С 8+ версий Java можно использовать не final переменные в локальных классах, но только при условии, что они не будут изменяться.
* Локальные классы нельзя объявлять с модификаторами доступа.
* Локальные классы обладают доступом к переменным метода.
* Может быть создан внутри блоков инициализации.

### Что такое абстрактные классы? Чем они отличаются от обычных?
Абстрактным называется класс, на основе которого не могут создаваться объекты.  
* Как обычный класс, но с абстрактными методами.  
* Нельзя создать объект или экземпляр абстрактного класса.  
  
Наследниками абстрактного класса могут быть другие абстрактные классы

### Что такое Singleton класс и как мы можем сделать его?
**Класс Singleton** – это класс, только один экземпляр которого может быть создан в любой момент времени в одной JVM. Класс можно сделать одноэлементным, сделав его конструктор закрытым.
```java
public class ClassForSingletonPattern {
    private static ClassForSingletonPattern instance;
	private ClassForSingletonPattern(){}
	public static ClassForSingletonPattern getInstance(){ // #3
	if(instance == null){		//если объект еще не создан
		instance = new ClassForSingletonPattern();	//создать новый объект
	}
	return instance;		// вернуть ранее созданный объект
    }
}
```

### Могут ли классы быть статическими?
**Класс можно объявить статическим за исключением классов верхнего уровня**.Такие классы известны как «вложенные статические классы» (nested static class).

### Может ли быть абстрактный класс без абстрактных методов?
Класс может быть абстрактным без единого абстрактного метода, если у него указан модификатор `abstract`.

### Каким образом из вложенного класса получить доступ к полю внешнего класса?
Статический вложенный класс имеет прямой доступ только к статическим полям обрамляющего класса.  
Простой вложенный класс, может обратиться к любому полю внешнего класса напрямую.  
  
В случае, если у вложенного класса уже существует поле с таким же литералом, то обращаться к внешнему полю следует через имя внешнего класса. Например: `Outer.this.field`.

### Как сделать из обычного класса абстрактный класс не используя ключевое слово abstract?
Да, если стоит цель запретить создание объектов этого класса, то можно объявить его конструктор `private`
```java
public class AbstractNoWordAbstract { 
	private AbstractNoWordAbstract() {
	}
}
```

### Могут ли быть конструкторы у абстрактных классов? Для чего они нужны?
**Да. Необходимы для наследников.**  
  
В абстрактном классе в Java можно объявить и определить конструкторы. Даже если вы не объявили никакого конструктора, компилятор добавит в абстрактный класс конструктор по умолчанию без аргументов. Абстрактные конструкторы будут часто использоваться для обеспечения ограничений класса или инвариантов, таких как минимальные поля, необходимые для настройки класса.

### Сколько максимум можно имплементировать интерфейсов?
Может реализовать до 65 535 интерфейсов. Это связано с ограничением константы interfaces_count в структуре ClassFile.